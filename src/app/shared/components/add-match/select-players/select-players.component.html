<div class="select-container" [formGroup]="matchForm">
  <ng-container *ngIf="!showingTeams" formGroupName="players">
    <ng-container *ngFor="let team of teams">
      <div
        class="select-player-team-container"
        [formGroupName]="team === 0 ? 'team1' : 'team2'">
        <app-autocomplete-selection
          [selectionFormControl]="
            team === 0 ? team1player1Control : team2player1Control
          "
          [options]="team === 0 ? team1player1Options : team2player1Options"
          [displayWithFunction]="displayWithFunction"
          [placeholderText]="placeholderText"
          [labelText]="playerLabelText"></app-autocomplete-selection>
        <app-autocomplete-selection
          [selectionFormControl]="
            team === 0 ? team1player2Control : team2player2Control
          "
          [options]="team === 0 ? team1player2Options : team2player2Options"
          [displayWithFunction]="displayWithFunction"
          [placeholderText]="placeholderText"
          [labelText]="playerLabelText"></app-autocomplete-selection>
      </div>
    </ng-container>
  </ng-container>
  <ng-container *ngIf="showingTeams" formGroupName="players">
    <ng-container *ngFor="let team of teams">
      <div
        class="select-team-container"
        [formGroupName]="team === 0 ? 'team1' : 'team2'">
        <app-autocomplete-selection
          [options]="team === 0 ? team1Options : team2Options"
          [displayWithFunction]="displayWithFunction"
          [selectionFormControl]="team === 0 ? team1Control : team2Control"
          [hasError]="team === 0 ? team1HasError : team2HasError"
          [errorText]="team === 0 ? team1ErrorText : team2ErrorText"
          [placeholderText]="placeholderText"
          [labelText]="teamLabelText"
          (optionSelectedEvent)="
            setPlayersForTeams($event, team)
          "></app-autocomplete-selection>
        <mat-card-actions>
          <button
            *ngIf="showingTeams"
            class="button-style"
            type="button"
            mat-mini-fab
            color="primary"
            (click)="openDialog(team)">
            +
          </button>
        </mat-card-actions>
      </div>
    </ng-container>
  </ng-container>
</div>
